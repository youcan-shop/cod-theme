{{ 'navbar.css' | asset_url | stylesheet_tag }}

{% style %}
  :root {
    --yc-nav-height: {{ section.settings.navbar_height }}px;
    --yc-nav-background: {{ section.settings.navbar_background_color.hex }};
    --yc-nav-links-color: {%- if section.settings.navbar_links_color -%}
                            {{ section.settings.navbar_links_color.hex }}
                          {%- else -%}
                            var(--yc-neutral-color)
                          {%- endif -%};
    --yc-nav-links-font-weight: {{ section.settings.navbar_links_font_weight }};
    --yc-nav-links-hover-transparency: {{ section.settings.navbar_links_hover_transparency }};
    --yc-nav-font-family: {%- if section.settings.navbar_font_family -%}
                            {{ section.settings.navbar_font_family }}, sans-serif
                          {%- else -%}
                            var(--yc-font-family)
                          {%- endif -%};
    --yc-nav-font-size: {{ section.settings.navbar_font_size }}px;
    --yc-nav-shadow: {{ section.settings.navbar_shadow }};
  }
{% endstyle %}

<header class='yc-header {%if section.settings.navbar_always_on_top%} nav-fixed {%endif%}'>
  <nav class='yc-navbar container'>
    {%- for block in section.blocks -%}
      {%- case block.type %}
        {%- when 'logo' %}
          <div class='logo'>
            <a href='/'>
              {% if section.settings.navbar_logo.src %}
                <img loading='lazy' src='{{ section.settings.navbar_logo.src }}'>
              {% else %}
                <img loading='lazy' src='{{ 'logo.png' | asset_url }}'>
              {% endif %}
            </a>
          </div>
        {%- when 'menu' %}
          <div class='menu'>  
              <button
              class='menu-toggler text-3xl'
              onclick="openDrawer('.navbar-drawer')"
            >
              <ion-icon name='menu-outline'></ion-icon>
            </button>
            
            <ul class='menu-list'>
              {% for item in main-link-list.links %}
                <li class='menu-item item{%-if item.active-%} active {%-endif%}'>
                  <a href='{{ item.url }}'>{{ item.title }}</a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {%- when 'search_and_cart' %}
          <div class='corner'>
            <button
              class='search'
              onclick='openSearch()'
            >
              <ion-icon name="search-outline"></ion-icon>
            </button>
            <div id='searchInputHolder'> 
              <div class='container search-wrapper'> 
                <form
                  action='/search'
                  method='GET'
                  class='input w-full flex gap-1 items-center'
                >
                  <input
                    placeholder='{{ 'navbar.search.placeholder' | t }}'
                    type='text'
                    name='q'
                    value=''
                    class='w-full'
                  >
                </form>
                <ion-icon class="close-search" name="close-outline"></ion-icon>
              </div>
            </div>
            <button class='cart relative' id='navbar-cart-icon'>
              <span id='cart-items-badge'>
                {{- cart.items | size -}}
              </span>
              <ion-icon name="cart-outline"></ion-icon>
            </button>
          </div>
      {%- endcase %}
    {%- endfor -%}
  </nav>
  <div class='navigation-drawer navbar-drawer block lg:hidden'>
    <div class='flex flex-col items-wrapper'>
      {% for item in main-link-list.links %}
        <a
          class='items flex items-center justify-between'
          href='{{ item.url }}'
        >
          <div>
            {{ item.title }}
          </div>
          <ion-icon name='chevron-forward-outline' class='arrow-icon'></ion-icon>
        </a>
      {% endfor %}
    </div>
  </div>
</header>

{%- schema -%}
{
  "label": "Navbar",
  "limit": 1,
  "blocks": [
    {
      "label": "Logo",
      "limit": 1,
      "type": "logo"
    },
    {
      "label": "Menu",
      "limit": 1,
      "type": "menu"
    },
    {
      "label": "Search and Cart",
      "limit": 1,
      "type": "search_and_cart"
    }
  ],
  "settings": [
    {
      "type": "paragraph",
      "content": "Main menu can be managed from your [Menu settings](https:\/\/seller-area.youcan.shop\/admin\/menus)"
    },
    {
      "type": "image_picker",
      "id": "navbar_logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "navbar_height",
      "min": 20,
      "max": 150,
      "step": 1,
      "unit": "px",
      "label": "Height",
      "default": 60
    },
    {
      "type": "color",
      "id": "navbar_background_color",
      "label": "Background color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "navbar_links_color",
      "label": "Items and links color"
    },
    {
      "type": "range",
      "id": "navbar_links_hover_transparency",
      "min": 0,
      "max": 1,
      "step": 0.10000000000000001,
      "unit": "",
      "label": "Links hover transparency",
      "default": 0.80000000000000004
    },
    {
      "type": "select",
      "id": "navbar_links_font_weight",
      "label": "Links font weight",
      "options": [
        {
          "value": "300",
          "label": "Light"
        },
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Bold"
        },
        {
          "value": "700",
          "label": "Heavy"
        }
      ],
      "default": "400"
    },
    {
      "type": "select",
      "id": "navbar_font_family",
      "label": "Font family",
      "options": [
        {
          "value": "Roboto",
          "label": "Roboto"
        },
        {
          "value": "Open Sans",
          "label": "Open Sans"
        },
        {
          "value": "Lato",
          "label": "Lato"
        },
        {
          "value": "Oswald",
          "label": "Oswald"
        },
        {
          "value": "Raleway",
          "label": "Raleway"
        },
        {
          "value": "Montserrat",
          "label": "Montserrat"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "navbar_shadow",
      "label": "Show navbar shadow",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "navbar_always_on_top",
      "label": "Navbar always on top",
      "default": false
    }
  ]
}
{%- endschema -%}
