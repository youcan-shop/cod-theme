{{ 'upsell.css' | asset_url | stylesheet_tag }}

<div class="upsell-page">
  {% if section.settings.upsell_text %}
    <div class="upsell-banner">
      {{ section.settings.upsell_text }}
    </div>
  {%- endif -%}
  <div class="upsell-form-container upsell-container">
    <div class="upsell-content">
      {{ upsell.description }}
      <div class="upsell-footer"> 
        {{ upsell.footer }}
      </div>
    </div>
    <form id="upsell-form" action="/api/upsells/{{ upsell.id }}/answer" method="post">
      <input
        type="hidden"
        name="_token"
      />
      <input
        type="hidden"
        name="upsell_id"
        value="{{ upsell.id }}" 
      />
      <input
        type="hidden"
        name="order_id"
        value="{{ order.id }}" 
      />
      {%- for product in upsell.products %}
        <input
          type="hidden"
          name="product_offers[{{ product.id }}]"
          value="{{ product.variants.0.id }}"
        />
      {%- endfor %}
          
      <div class="upsell-form-submit">
      <button type="submit" name="answer" value="yes" class="upsell-submit-yes">
        <span class="button-text">{{ 'upsell.yes_submit_button' | t }}</span>
        <div class="spinner hidden"></div>
      </button>
      <button type="submit" name="answer" value="no" class="upsell-submit-no">
        <span class="button-text">{{ 'upsell.no_submit_button' | t }}</span>
        <div class="spinner hidden"></div>
      </button>
    </div>
    </form>
  </div>
</div> 

{{ 'upsell.js' | asset_url | script_tag_deferred }}

{%- schema %}
  {
    "label": "Upsell",
    "settings": [
      {
        "type": "richtext",
        "id": "upsell_text",
        "label": "Upsell text"
      }
    ]
  }
{%- endschema %}
