{{ 'notice-bar.css' | asset_url | stylesheet_tag }}

{%- assign selected_product = section.settings.product %}

{%- if product %}
  {%- assign selected_product = product %}
{%- endif %}

{%- if selected_product %}
  {%- render 'reviews', reviews_title: section.settings.reviews_title, reviews_product_id: selected_product.id, product: selected_product -%}
{%- endif %}

{% schema %}
{
  "label": "Product reviews",
  "templates": ["index", "product", "page"],
  "settings": [
    {
      "label": "Product",
      "id": "product",
      "type": "product"
    },
    {
      "type": "text",
      "id": "reviews_title",
      "label": "Reviews title",
      "default": "Reviews"
    },
    {
      "type": "header",
      "content": "Info ℹ️"
    },
    {
      "type": "paragraph",
      "content": "When you include this section on a product page, the product reviews will be displayed automatically based on the current product."
    },
    {
      "type": "paragraph",
      "content": "If you include this section on a different page, you can select a product in the settings."
    }
  ]
}
{% endschema %}
